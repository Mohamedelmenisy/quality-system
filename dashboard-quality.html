<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quality Command Center</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M0 0H100V50H0V0Z' fill='%2300bfff'/%3E%3Cpath d='M0 50H100V100H0V50Z' fill='%23007BFF'/%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #00bfff;
            --primary-color-darker: #007BFF;
            --bg-color: #121212;
            --sidebar-bg: #1a1a1a;
            --card-bg: #1a1a1a;
            --text-color: #e6edf3;
            --text-muted-color: #8b949e;
            --border-color: #333;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --font-body: 'Poppins', sans-serif;
            --border-radius-base: 0.75rem;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-body); background-color: var(--bg-color); color: var(--text-color); }
        .layout { display: flex; min-height: 100vh; }
        .sidebar {
            width: 250px; background-color: var(--sidebar-bg); border-right: 1px solid var(--border-color);
            display: flex; flex-direction: column; padding: 1.5rem 0; position: fixed; height: 100%; z-index: 1000;
        }
        .sidebar-header {
            padding: 0 1.5rem 1.5rem 1.5rem; display: flex; align-items: center; gap: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }
        .sidebar-logo { height: 32px; }
        .sidebar-title { font-size: 1.25rem; color: var(--primary-color); font-weight: 700; }
        .sidebar-nav-container { flex-grow: 1; overflow-y: auto; padding-top: 1rem; }
        .nav-group { margin-bottom: 1.5rem; padding: 0 1.5rem; }
        .nav-group-title {
            font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;
            color: var(--text-muted-color); font-weight: 600; margin-bottom: 0.75rem;
        }
        .sidebar-nav { list-style: none; }
        .sidebar-nav a {
            display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem; margin: 0.25rem 0;
            text-decoration: none; color: var(--text-muted-color); font-weight: 500; border-radius: 0.5rem;
            transition: all 0.2s ease; cursor: pointer;
        }
        .sidebar-nav a:hover { background-color: rgba(0, 191, 255, 0.1); color: var(--primary-color); }
        .sidebar-nav li.active a { background-color: var(--primary-color); color: black; }
        .sidebar-footer { padding: 1.5rem; border-top: 1px solid var(--border-color); }
        .user-profile-widget { text-align: center; }
        .user-avatar { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--primary-color); margin: 0 auto 10px; }
        .user-name { font-weight: 600; font-size: 1rem; }
        .user-role { font-size: 0.8rem; color: var(--text-muted-color); margin-bottom: 8px; }
        .user-status { display: flex; align-items: center; justify-content: center; gap: 6px; font-size: 0.8rem; }
        .user-status .status-dot { width: 8px; height: 8px; background-color: var(--success-color); border-radius: 50%; }
        .main-wrapper { flex-grow: 1; margin-left: 250px; display: flex; flex-direction: column; }
        .topbar {
            background-color: var(--sidebar-bg); border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 900;
        }
        .topbar-left { display: flex; align-items: center; gap: 1rem; }
        #search-bar { background: #2c2c2c; border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-color); padding: 8px 12px; width: 250px; }
        .page-title { font-size: 1.5rem; color: var(--text-color); font-weight: 700; }
        .topbar-actions { display: flex; align-items: center; gap: 1rem; }
        .notification-bell { position: relative; }
        .notification-btn { background: none; border: none; color: var(--text-muted-color); font-size: 22px; cursor: pointer; }
        .notification-dropdown { display: none; position: absolute; right: 0; top: 120%; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-base); width: 320px; box-shadow: 0 8px 16px rgba(0,0,0,0.3); z-index: 10; }
        .notification-dropdown.show { display: block; }
        .notification-header { padding: 1rem; border-bottom: 1px solid var(--border-color); font-weight: 600; }
        .notification-list { list-style: none; padding: 0; max-height: 300px; overflow-y: auto; }
        .notification-item { padding: 1rem; border-bottom: 1px solid var(--border-color); font-size: 14px; }
        .notification-item:last-child { border-bottom: none; }
        .main-content { padding: 2rem; flex-grow: 1; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .dashboard-grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 1.5rem; }
        .grid-col-span-12 { grid-column: span 12; }
        .grid-col-span-3 { grid-column: span 3; }
        .grid-col-span-4 { grid-column: span 4; }
        .grid-col-span-8 { grid-column: span 8; }
        .widget { background-color: var(--card-bg); border-radius: var(--border-radius-base); padding: 1.5rem; border: 1px solid var(--border-color); }
        .widget h3 { font-size: 1.25rem; margin-bottom: 1rem; color: var(--text-color); font-weight: 700; }
        .results-table-container { overflow-x: auto; }
        .results-table { width: 100%; border-collapse: collapse; }
        .results-table thead th { padding: 1rem 1.5rem; text-align: left; background-color: #2c2c2c; font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted-color); font-weight: 600; }
        .results-table tbody td { padding: 1rem 1.5rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        .results-table tbody tr:last-child td { border-bottom: none; }
        .results-table tbody tr:hover { background-color: #2c2c2c; }
        .status-badge { padding: 0.3em 0.7em; border-radius: 20px; font-size: 0.75rem; font-weight: 600; color: white; text-align: center; display: inline-block; }
        .status-open { background-color: var(--info-color); }
        .status-correct { background-color: var(--success-color); }
        .status-error { background-color: var(--danger-color); }
        .status-escalated { background-color: var(--warning-color); color: #000; }
        .table-actions { display: flex; gap: 0.5rem; align-items: center; }
        .btn { padding: 0.5rem 1rem; border-radius: 0.5rem; border: none; cursor: pointer; font-weight: 600; transition: all 0.2s ease; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;}
        .btn-primary { background-color: var(--primary-color); color: black; }
        .btn-icon { background: none; border: none; color: var(--text-muted-color); cursor: pointer; font-size: 18px; padding: 5px; }
        .btn-icon:hover { color: var(--primary-color); }
        .btn-danger { background-color: var(--danger-color); color: white; }
        .btn-success { background-color: var(--success-color); color: white; }
        .placeholder-content { background-color: var(--card-bg); padding: 3rem; border-radius: var(--border-radius-base); text-align: center; color: var(--text-muted-color); border: 2px dashed var(--border-color); }
        .schedule-table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
        .schedule-table th { text-align: left; padding: 0 10px 10px; color: var(--text-muted-color); font-weight: 500; }
        .schedule-table td { background-color: #2c2c2c; padding: 15px; border: 1px solid var(--border-color); }
        .schedule-table td:first-child { border-top-left-radius: 8px; border-bottom-left-radius: 8px; }
        .schedule-table td:last-child { border-top-right-radius: 8px; border-bottom-right-radius: 8px; }
        .schedule-agent-name { font-weight: 600; color: var(--text-color); }
        .task-assigned { background-color: rgba(0, 123, 255, 0.3); color: var(--text-color); font-weight: 500; border-radius: 4px; padding: 0.5rem; text-align: center; }
        .task-off { background-color: rgba(220, 53, 69, 0.2); color: var(--text-muted-color); text-align: center; padding: 0.5rem; border-radius: 4px; }
        .filter-panel { display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end; margin-bottom: 1.5rem; padding: 1.5rem; background-color: #222; border-radius: var(--border-radius-base); }
        .filter-group { flex: 1; min-width: 150px; }
        .filter-group label { display: block; margin-bottom: 5px; font-weight: 500; font-size: 14px; }
        .filter-group input, .filter-group select { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; background: #2c2c2c; color:#fff; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }
        /* Modal Styles */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
        .modal-content { background-color: var(--card-bg); margin: 10% auto; padding: 25px; border: 1px solid var(--border-color); width: 80%; max-width: 600px; border-radius: var(--border-radius-base); position: relative; animation: slideIn 0.4s; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; }
        .modal-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); }
        .close-btn { color: var(--text-muted-color); font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-btn:hover { color: var(--text-color); }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        /* Performance Comparison */
        .performance-comp { margin-top: 1rem; }
        .performance-comp .label { font-size: 14px; margin-bottom: 8px; color: var(--text-muted-color); }
        .progress-bar { width: 100%; height: 12px; background-color: #2c2c2c; border-radius: 6px; overflow: hidden; }
        .progress-bar-inner { height: 100%; background-color: var(--success-color); border-radius: 6px; transition: width 0.5s ease-out; }
        .performance-change { margin-top: 8px; font-weight: 600; }
    </style>
</head>
<body class="dark">
    <div class="layout">
        <aside class="sidebar" id="sidebar">
            <div>
                <div class="sidebar-header">
                    <svg class="sidebar-logo" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 0H100V50H0V0Z" fill="#00bfff"/><path d="M0 50H100V100H0V50Z" fill="#007BFF"/></svg>
                    <h1 class="sidebar-title">QualityX</h1>
                </div>

                <div class="sidebar-nav-container">
                    <div class="nav-group">
                        <h2 class="nav-group-title">Menu</h2>
                        <ul class="sidebar-nav">
                            <li class="active"><a data-tab="dashboard"><span>📊</span> Dashboard</a></li>
                            <li><a data-tab="my-assigned-orders"><span>📝</span> Assigned Orders</a></li>
                            <li><a data-tab="team-scheduling"><span>🗓️</span> Team Scheduling</a></li>
                            <li><a data-tab="reports"><span>📈</span> Reports</a></li>
                        </ul>
                    </div>
                     <div class="nav-group">
                        <h2 class="nav-group-title">Account</h2>
                         <ul class="sidebar-nav">
                            <li><a data-tab="settings"><span>⚙️</span> Settings</a></li>
                            <li><a data-tab="help"><span>❓</span> Get Help</a></li>
                            <li><a onclick="window.location.href='./login.html'"><span>🔑</span> Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="user-profile-widget">
                    <img class="user-avatar" src="https://i.pravatar.cc/50?u=quality.user" alt="User Avatar">
                    <div class="user-name">Fahad Al-Qahtani</div>
                    <div class="user-role">Quality Agent</div>
                    <div class="user-status"><span class="status-dot"></span> Connected</div>
                </div>
            </div>
        </aside>

        <div class="main-wrapper">
            <header class="topbar">
                <div class="topbar-left">
                     <h2 class="page-title" id="page-title">Dashboard</h2>
                </div>
                <div class="topbar-actions">
                     <input type="search" id="search-bar" placeholder="Search for orders...">
                     <div class="notification-bell">
                        <button id="notification-btn" class="notification-btn">🔔</button>
                        <div id="notification-dropdown" class="notification-dropdown">
                            <div class="notification-header">Notifications</div>
                            <ul class="notification-list">
                                <li class="notification-item">New Escalation: Order CZ-84371</li>
                                <li class="notification-item">3 new reviews assigned.</li>
                                <li class="notification-item">Report for last week is ready.</li>
                            </ul>
                        </div>
                     </div>
                    <button class="btn btn-primary"><span>➕</span> New Review</button>
                </div>
            </header>

            <main class="main-content">
                <!-- Dashboard -->
                <div id="dashboard" class="tab-content active">
                    <div class="dashboard-grid">
                        <div class="widget grid-col-span-8">
                            <h3>Monthly Performance</h3>
                            <img src="https://quickchart.io/chart?c={type:'bar',options:{legend:{display:true,labels:{fontColor:'white'}},scales:{xAxes:[{stacked:true,gridLines:{color:'rgba(255,255,255,0.1)'},ticks:{fontColor:'white'}}],yAxes:[{stacked:true,ticks:{precision:0,fontColor:'white'},gridLines:{color:'rgba(255,255,255,0.1)'}}]}},data:{labels:['Feb','Mar','Apr','May','Jun','Jul'],datasets:[{label:'Correct',data:[5300,5100,5400,4900,5200,5412],backgroundColor:'%2328a745'},{label:'Errors',data:[210,180,240,150,140,123],backgroundColor:'%23dc3545'}]}}" alt="Reviews per month chart">
                        </div>
                        <div class="widget grid-col-span-4">
                            <h3>Your Performance</h3>
                            <p class="text-muted-color">vs. Last Month</p>
                            <div class="performance-comp">
                                <div class="label">Total Reviews</div>
                                <div class="progress-bar">
                                    <div class="progress-bar-inner" style="width: 85%; background-color: var(--primary-color-darker);"></div>
                                </div>
                                <p class="performance-change" style="color: var(--success-color);">+3.1%</p>
                            </div>
                            <div class="performance-comp">
                                <div class="label">Error Rate</div>
                                <div class="progress-bar">
                                    <div class="progress-bar-inner" style="width: 25%; background-color: var(--danger-color);"></div>
                                </div>
                                <p class="performance-change" style="color: var(--success-color);">-1.8% (Improvement)</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Assigned Orders -->
                <div id="my-assigned-orders" class="tab-content">
                     <div class="filter-panel">
                        <div class="filter-group">
                            <label>Status</label>
                            <select><option>All</option><option>Open</option><option>Escalated</option><option>Correct</option><option>Error</option></select>
                        </div>
                        <div class="filter-group">
                             <label>From Date</label>
                             <input type="date" style="color-scheme: dark;">
                        </div>
                        <div class="filter-group">
                             <label>To Date</label>
                             <input type="date" style="color-scheme: dark;">
                        </div>
                         <button class="btn btn-primary">Apply</button>
                         <button class="btn" style="background: #333; color: white;">Reset</button>
                    </div>
                    <div class="widget">
                         <h3>Orders in Queue (<span id="orders-count">6</span>)</h3>
                        <div class="results-table-container">
                            <table class="results-table">
                                <thead>
                                    <tr><th>Request ID</th> <th>Issue Type</th> <th>Date Assigned</th> <th>Status</th> <th>Actions</th></tr>
                                </thead>
                                <tbody id="orders-table-body">
                                    <!-- Rows rendered by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Team Scheduling -->
                <div id="team-scheduling" class="tab-content">
                    <div class="widget grid-col-span-12">
                        <h3>Team Schedule: This Week</h3>
                        <table class="schedule-table">
                            <thead>
                                <tr><th>Agent</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat/Sun</th></tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="schedule-agent-name">Fahad A.</td>
                                    <td><div class="task-assigned">Batch A Review</div></td>
                                    <td><div class="task-assigned">Batch B Review</div></td>
                                    <td><div class="task-assigned">Batch C Review</div></td>
                                    <td><div class="task-assigned">Follow-ups</div></td>
                                    <td><div class="task-assigned">General Queue</div></td>
                                    <td><div class="task-off">OFF</div></td>
                                </tr>
                                 <tr>
                                    <td class="schedule-agent-name">Sara K.</td>
                                    <td><div class="task-assigned">General Queue</div></td>
                                    <td><div class="task-assigned">Batch C Review</div></td>
                                    <td><div class="task-off">OFF</div></td>
                                    <td><div class="task-off">OFF</div></td>
                                    <td><div class="task-assigned">Batch D Review</div></td>
                                    <td><div class="task-assigned">Weekend Shift</div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Other Tabs Placeholders -->
                <div id="reports" class="tab-content"><div class="placeholder-content"><h3>Reports & Analytics feature is under development.</h3></div></div>
                <div id="settings" class="tab-content"><div class="placeholder-content"><h3>Settings panel is under development.</h3></div></div>
                <div id="help" class="tab-content"><div class="placeholder-content"><h3>Help Center is under development.</h3></div></div>

            </main>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="view-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Order Details: <span id="modal-order-id"></span></h3>
            <span class="close-btn" id="close-view-modal">×</span>
        </div>
        <p><strong>Issue Type:</strong> <span id="modal-issue-type"></span></p>
        <p><strong>Assigned To:</strong> Fahad A.</p>
        <p><strong>Date Assigned:</strong> <span id="modal-date"></span></p>
        <p><strong>Status:</strong> <span id="modal-status"></span></p>
        <hr style="border-color: var(--border-color); margin: 15px 0;">
        <p>Full order details will be displayed here.</p>
      </div>
    </div>

    <!-- Error Comment Modal -->
    <div id="error-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">Confirm Error for <span id="error-modal-order-id"></span></h3>
            <span class="close-btn" id="close-error-modal">×</span>
        </div>
        <label for="error-comment" style="font-weight: 500; margin-bottom: 8px; display:block;">Reason for Error:</label>
        <textarea id="error-comment" rows="4" style="width: 100%; background: #2c2c2c; border: 1px solid var(--border-color); color: white; padding: 10px; border-radius: 8px; font-family: inherit;"></textarea>
        <button class="btn btn-danger" style="margin-top: 15px;">Submit Error</button>
      </div>
    </div>
    
    <script>
    // --- Tab Switching Logic ---
    const pageTitle = document.getElementById('page-title');
    document.querySelectorAll('.sidebar-nav a').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const tabId = link.dataset.tab;
            if (!tabId) { // For external/logout links
                if(link.onclick) link.onclick();
                return;
            }
            
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.sidebar-nav li').forEach(l => l.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            link.parentElement.classList.add('active');
            pageTitle.textContent = link.textContent.trim();
        });
    });

    // --- Notifications Dropdown ---
    const notificationBtn = document.getElementById('notification-btn');
    const notificationDropdown = document.getElementById('notification-dropdown');
    notificationBtn.addEventListener('click', () => {
        notificationDropdown.classList.toggle('show');
    });
    window.addEventListener('click', (e) => {
        if (!notificationBtn.contains(e.target) && !notificationDropdown.contains(e.target)) {
            notificationDropdown.classList.remove('show');
        }
    });

    // --- Modal Logic ---
    const viewModal = document.getElementById('view-modal');
    const errorModal = document.getElementById('error-modal');
    const closeViewModal = document.getElementById('close-view-modal');
    const closeErrorModal = document.getElementById('close-error-modal');
    
    closeViewModal.onclick = () => viewModal.style.display = 'none';
    closeErrorModal.onclick = () => errorModal.style.display = 'none';
    window.onclick = (event) => {
      if (event.target == viewModal) viewModal.style.display = "none";
      if (event.target == errorModal) errorModal.style.display = "none";
    }

    // --- Sample Data & Rendering for "Assigned Orders" ---
    const sampleOrders = [
        { id: 'CZ-84375', issue: 'Missing Item', status: 'Open', date: '2025-07-28'},
        { id: 'CZ-84371', issue: 'Spillage', status: 'Escalated', date: '2025-07-26'},
        { id: 'CZ-84365', issue: 'Wrong Item', status: 'Correct', date: '2025-07-24'},
        { id: 'CZ-84360', issue: 'Driver Behavior', status: 'Error', date: '2025-07-23'},
        { id: 'CZ-84374', issue: 'Wrong Order', status: 'Open', date: '2025-07-28'},
        { id: 'CZ-84373', issue: 'Cold Food', status: 'Open', date: '2025-07-27'},
    ];

    function renderOrdersTable() {
        const tableBody = document.getElementById('orders-table-body');
        tableBody.innerHTML = '';
        sampleOrders.forEach(order => {
            const statusClass = `status-${order.status.toLowerCase()}`;
            const actionsHtml = `
                <button class="btn-icon view-btn" title="View Details" data-id="${order.id}">👁️</button>
                ${order.status === 'Open' ? `
                <button class="btn-icon success-btn" title="Mark as Correct">✔️</button>
                <button class="btn-icon error-btn" title="Mark as Error" data-id="${order.id}">❌</button>
                ` : ''}
            `;

            tableBody.innerHTML += `
                <tr data-order='${JSON.stringify(order)}'>
                    <td>${order.id}</td>
                    <td>${order.issue}</td>
                    <td>${order.date}</td>
                    <td><span class="status-badge ${statusClass}">${order.status}</span></td>
                    <td><div class="table-actions">${actionsHtml}</div></td>
                </tr>
            `;
        });
        addTableActionListeners();
    }

    function addTableActionListeners() {
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const row = e.target.closest('tr');
                const orderData = JSON.parse(row.dataset.order);
                document.getElementById('modal-order-id').textContent = orderData.id;
                document.getElementById('modal-issue-type').textContent = orderData.issue;
                document.getElementById('modal-date').textContent = orderData.date;
                document.getElementById('modal-status').innerHTML = `<span class="status-badge status-${orderData.status.toLowerCase()}">${orderData.status}</span>`;
                viewModal.style.display = 'block';
            });
        });

        document.querySelectorAll('.error-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const orderId = e.target.dataset.id;
                document.getElementById('error-modal-order-id').textContent = orderId;
                errorModal.style.display = 'block';
            });
        });
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        renderOrdersTable();
    });
    </script>
</body>
</html>